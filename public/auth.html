<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso Cliente | Zynetra</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header id="header">
        <div class="container nav-container">
            <div class="logo"><a href="/" class="logo-link"><span class="logo-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14H12L11 22L21 10H12L13 2Z"/></svg></span>Zynetra</a></div>
            <a href="/" class="btn btn-sm btn-outline">Volver al Inicio</a>
        </div>
    </header>
    <div class="auth-container">
        <div class="auth-box">
            <div id="error-box" style="display:none;" class="error-msg"></div>
            <div class="auth-toggle">
                <button id="btn-login" class="active" onclick="toggle('login')">Iniciar Sesión</button>
                <button id="btn-register" onclick="toggle('register')">Registro Corporativo</button>
            </div>
            <form id="form-login" action="/login" method="POST">
                <div class="form-group"><label>Email</label><input type="email" name="email" class="form-input" required placeholder="tu@empresa.com"></div>
                <div class="form-group"><label>Contraseña</label><input type="password" name="password" class="form-input" required placeholder="••••••••"></div>
                <div class="checkbox-group"><input type="checkbox" id="rem" name="remember"><label for="rem">Recordarme</label></div>
                <button type="submit" class="btn btn-primary btn-full">Entrar</button>
            </form>
            <form id="form-register" action="/register" method="POST" style="display:none;" onsubmit="startLoading()">
                <div class="form-group"><label>Nombre</label><input type="text" name="name" class="form-input" required></div>
                <div class="form-row">
                    <div class="form-group"><label>Teléfono</label><input type="tel" name="phone" class="form-input" required></div>
                    <div class="form-group custom-input-wrapper"><label>Cargo</label><input type="text" name="role" id="role-in" class="form-input" required autocomplete="off"><div class="suggestions-list" id="role-list"></div></div>
                </div>
                <div class="form-group custom-input-wrapper"><label>Empresa</label><input type="text" name="company" id="comp-in" class="form-input" required autocomplete="off"><div class="suggestions-list" id="comp-list"></div></div>
                <div class="form-group"><label>Email</label><input type="email" name="email" class="form-input" required></div>
                <div class="form-group"><label>Contraseña</label><input type="password" name="password" class="form-input" required minlength="6"></div>
                <div class="form-group">
                    <div class="slider-captcha-container" id="slider"><div class="slider-text" id="slide-text">Desliza para verificar</div><div class="slider-handle" id="handle"><i class="fas fa-arrow-right"></i></div></div>
                </div>
                <button type="submit" id="btn-sub" class="btn btn-primary btn-full" disabled style="opacity:0.5;">Crear Cuenta</button>
            </form>
        </div>
    </div>
    <script>
        function toggle(mode) {
            document.getElementById('form-login').style.display = mode==='login'?'block':'none';
            document.getElementById('form-register').style.display = mode==='login'?'none':'block';
            document.getElementById('btn-login').classList.toggle('active', mode==='login');
            document.getElementById('btn-register').classList.toggle('active', mode!=='login');
        }
        function startLoading() {
            const btn = document.getElementById('btn-sub');
            btn.innerText = "Procesando...";
            btn.style.opacity = "0.7";
        }
        
        // Slider Logic
        const s = document.getElementById('slider'), h = document.getElementById('handle'), b = document.getElementById('btn-sub');
        let drag = false;
        h.addEventListener('mousedown', () => !s.classList.contains('unlocked') && (drag=true));
        h.addEventListener('touchstart', () => !s.classList.contains('unlocked') && (drag=true));
        document.addEventListener('mouseup', () => { if(drag){ drag=false; if(!s.classList.contains('unlocked')) h.style.left='5px'; }});
        document.addEventListener('touchend', () => { if(drag){ drag=false; if(!s.classList.contains('unlocked')) h.style.left='5px'; }});
        document.addEventListener('mousemove', e => { if(!drag) return; move(e.clientX); });
        document.addEventListener('touchmove', e => { if(!drag) return; move(e.touches[0].clientX); });

        function move(clientX) {
            const rect = s.getBoundingClientRect();
            let x = clientX - rect.left - 20;
            if(x < 5) x = 5;
            if(x > s.offsetWidth - 45) x = s.offsetWidth - 45;
            h.style.left = x + 'px';
            if(x >= s.offsetWidth - 50) {
                s.classList.add('unlocked'); h.innerHTML='<i class="fas fa-check"></i>'; 
                document.getElementById('slide-text').innerText='Verificado'; b.disabled=false; b.style.opacity='1'; drag=false;
            }
        }

        // Errors & Auto
        const err = new URLSearchParams(window.location.search).get('error');
        if(err) { const box=document.getElementById('error-box'); box.style.display='block'; box.innerText = err==='email_exists'?'Email ya registrado.':err; }
        const roles=['CEO','CTO','Dev','Manager'], comps=['Startup','Agencia'];
        function auto(id, listId, d) {
            const i=document.getElementById(id), l=document.getElementById(listId);
            i.addEventListener('focus', ()=>render(d));
            i.addEventListener('input', ()=>render(d.filter(x=>x.toLowerCase().includes(i.value.toLowerCase()))));
            document.addEventListener('click', e=>{if(e.target!=i && e.target!=l) l.classList.remove('active')});
            function render(arr) {
                l.innerHTML=''; if(!arr.length) return l.classList.remove('active');
                arr.forEach(x=>{const div=document.createElement('div'); div.className='suggestion-item'; div.innerText=x; div.onclick=()=>{i.value=x; l.classList.remove('active')}; l.appendChild(div)});
                l.classList.add('active');
            }
        }
        auto('role-in','role-list', roles); auto('comp-in','comp-list', comps);
    </script>
</body>
</html>